{% load staticfiles %}

{% block javascript %}
<script type="text/javascript" src="{% static 'js/jquery.js' %}"></script>
<script type="text/javascript" src="{% static 'js/chosen.jquery.min.js' %}"></script>
{% endblock %}

{% block estilos %}
<link rel="stylesheet" href="{% static 'css/chosen.min.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'css/font-awesome.min.css' %}"/>
{% endblock %}

<header role="banner">
  <h1>Admin Panel</h1>
  <ul class="utilities">
    <li class="logout warn"><a href="{% url 'logout' %}">Salir</a></li>
  </ul>
</header>

{%block botones%}
<nav role="navigation" style="background-color:#4E342E">
  <ul class="main">
    <li class="dashboard"><a href="{% url 'carga_csv' %}">Cargar archivos CSV</a></li>
    <li class="edit"><a href="{% url 'alta_empresa_admin' %}">Alta Empresa-Admin</a></li>
  </ul>
</nav>
{% endblock %}

<body style= "background-color: #EF5350;">
<main role="main">

  {% if form %}
  <section class="panel">
    <h2>Cargar archivos CSV </h2>
    <body>
     <form action="" method="post" enctype="multipart/form-data">{% csrf_token %}
       <div class="row">
         <div class="col-md-6">
           <div align= "justify">
             <p>1) Elija la tabla a la que desea cargar datos</p>
            {{form.tabla}}
           </div>
          </div>
         <div class="col-md-6">
           <div align= "justify">
           <p>2) Elija el archivo en formato CSV</p>
              {{form.docfile}}
           </div>
         </div>
      </div>
      <input type="submit" value="Cargar" style="background-color:#0D47A1">
     </form>
    </body>
  </section>
  {% endif %}


{% if tablas %}
  <section class="panel">
    <h2>Baja de datos</h2>
    <div class="feedback error">Atencion
        <ul>
          <li>Estas opciones permiten borrar datos de manera <strong>PERMANENTE</strong></li>
        </ul>
      </div>
      <select id="chosen-with">
      <option disabled selected>Seleccion una tabla..</option>
       {% for tabla in tablas %}
         <option value="{{tabla}}">{{tabla}}</option>
       {% endfor %}
      </select>
  </section>
  {% endif %}


{% if empresas %}
  {% if error == 1 %}
      <div align= "center">
        <div class="alert alert-danger">
            <ul style="list-style-type:none;"><strong>El documento ingresado no existe</strong></ul>
        </div>
      </div>
  {% endif %}
  <div align=center>
      <form action="" method="post">{% csrf_token %}
        <section class="panel" style="background-color:#FFCC80">
          <div align= "center">
            <p></p>
            <h2>Empresas</h2>
            <p></p>
            <h6>Ingrese el codigo de la empresa a la que desea agregar un administrador</h6>
            <p></p>
              <select name="empresa" id="empresa_id" class="chosen" required>
                <option value="">Seleccione una persona..</option>
                {% for empresa in empresas %}
                  <option value="{{empresa}}">{{empresa}}</option>
                {% endfor %}
              </select>
              <p></p>
          </div>
        </section>

        <section class="panel" style="background-color:#FFCC80">
          <div align= "center">
          <p></p>
          <h2>Personas</h2>
          <p></p>
          <h6>Ingrese el documento de la persona que desea asignar como administrador de empresa</h6>
          <p></p>
              <input id="usr" name="documento" style = "text-align:center; width:200px; height:25px; font-size:11px; color:#585554; border-color:grey; border-radius:6px;" required>
          </div>
          <p></p>
        </section>
        <input type="submit" value="Cargar">
        </form>
      </div>
<script>
$('.chosen').chosen({
    width: '70%',
    allow_single_deselect: true,
    no_results_text: "No se encont√≥ el documento!"
    });
    $.validator.setDefaults({ ignore: ":hidden:not(select)" });
</script>
{% endif %}



</main>
</body>
<footer role="contentinfo">Easy Admin Style by Melissa Cabral</footer>
